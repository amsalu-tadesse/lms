<!DOCTYPE html>
<html>

<head>
    <!-- Basic -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>
        course-player
    </title>


    <meta name="keywords" content="HTML5 Template" />
    <meta name="description" content="Porto - Responsive HTML5 Template">
    <meta name="author" content="okler.net">

    <!-- Favicon -->
    <link rel="shortcut icon" href="{{asset('images/eca.png')}}" type="image/x-icon" />
    <link rel="apple-touch-icon" href="images">

    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, shrink-to-fit=no">

    <!-- Web Fonts  -->
    <link id="googleFonts" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800%7CShadows+Into+Light&display=swap" rel="stylesheet" type="text/css">

    <!-- Vendor CSS -->
    <link rel="stylesheet" href="{{asset('assets/plugins/bootstrap/css/bootstrap.min.css')}}">
    <link rel="stylesheet" href="{{asset('assets/plugins/fontawesome-free/css/all.min.css')}}">

    <!-- Theme CSS -->
    <link rel="stylesheet" href="{{asset('student/css/theme.css')}}">
    <!-- Theme Custom CSS -->
    <link rel="stylesheet" href="{{asset('student/css/custom.css')}}">
    <link rel="stylesheet" href="{{asset('student/css/default.css')}}">
    <link rel="stylesheet" href="{{asset('student/css/theme-elements.css')}}">
    <style>
        .tabs {
            padding: 16px 0;
        }
        
        iframe,
        video {
            width: 100%;
        }
        
        #youtube,
        #video,
        #document {
            margin-top: 17px;
            width: 100%;
            padding: 0;
        }
        
        p,
        ul {
            color: black;
        }
    </style>
</head>

<body>
    <div class="body">
        {% include 'master-st/navbar.html.twig' %}
        <script>
            const videos = {};
            const desc = {};
            const resource = {};
        </script>
        <div role="main" class="main">
            <section class="section border-0 m-0" style="min-height: 600px;">
                <div class="container-fluid">
                    <div class="row">

                        <div class="col-md-8">
                            <div id="video">
                                <video autoplay controls width="100%" height="453">
									<source id="video-source" src="">
								</video>
                            </div>
							
                            <div id="youtube">
                                <iframe height="453" width="100%" src="" style="display:none" id="youtube-link" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                            </div>
                            <div id="document">
                                <div class="card" id="text-card" style="display:none">
                                    <div class="card-body">
                                        <div id="html-text"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">

                            <div class="tabs ">
                                <ul class="nav nav-tabs tabs-primary">
                                    <li class="nav-item" style="width: 100%; border-bottom: 1px solid blue">
                                        <a class="nav-link active" href="#popular7" data-bs-toggle="tab">Contents</a>
                                    </li>
                                </ul>
                                <div class="tab-content">
                                    <ul class="list list-icons list-icons-style-1">
                                        {% for content in contents %} {% if content.filename != null %}
                                        <li data-type="{{content.id}}" content="filename">
                                            <i class="fas fa-play"></i> {{ content.title }}
                                        </li>
                                        <script>
                                            var id = "{{ content.id }}";
                                            var link = "{{ content.filename }}";
                                            var res = "{{ content.resource }}";
                                            var de = "{{ content.description }}";
                                            videos[id] = link;
                                            desc[id] = de;
                                            resource[id] = res;
                                        </script>
                                        {% elseif content.videoLink != null %}
                                        <li data-type="{{content.id}}" content="youtube">
                                            <i class="fas fa-play-circle"></i> {{ content.title }}
                                        </li>
                                        <script>
                                            var id = "{{ content.id }}";
                                            var link = "{{ content.videoLink }}";
                                            var res = "{{ content.resource }}";
                                            var de = "{{ content.description }}";
                                            videos[id] = link;
                                            desc[id] = de;
                                            resource[id] = res;
                                        </script>
                                        {% elseif content.content != "" %}
                                        <li data-type="{{content.id}}" content="doc">
                                            <i class="fas fa-book"></i> {{ content.title }}
                                        </li>
                                        {% endif %} {% endfor %}
                                        <li>
                                            <a href="#" style="color:blue">
												Chapter Quiz
											</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-8" id="desc-text" style="display:none">
                            <p id="description" style="width:100%; background-color:white;padding: 15px;"></p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        {% include 'master-st/footer.html.twig' %}
    </div>

    <!-- jquery -->
    <script src=" {{asset( 'assets/plugins/jquery/jquery.js')}} "></script>

    <!-- Theme Base, Components and Settings -->
    <script src="{{asset( 'student/js/theme.js')}} "></script>

    <!-- Theme Custom -->
    <script src="{{asset( 'student/js/custom.js')}} "></script>

    <!-- Theme Initialization Files -->
    <script src="{{asset( 'student/js/theme.init.js')}} "></script>
   <script>
			var selected_doc = 0;
			$("li").on("click", function(){
				content = $(this).attr("content");
				var id = $(this).attr("data-type");
				if(content === "doc")
				{
					if(selected_doc != id){
						$("#youtube-link").css("display", "none");
						$("#youtube-link").attr("src","");
						$("#video").html("");
						$("#text-card").css("display","block");
						url = "/content/"+id+"/cont";
						$.ajax({
							url: url,
							type: "get",
							success: function(data)
							{
								console.log(data);
							},
							error: function(xhr)
							{
								if(xhr.status == 200)
								{
									$("#html-text").html(xhr.responseText);
								}
							}
						});
						selected_doc = id;
					}

				}
				else if(content === "youtube")
				{
				//	var iframe = $('<iframe height="453" width="100%" src="" id="youtube-link" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>');
				//	$("#youtube").append(iframe);
					$("#text-card").css("display","none");
					$("#video").html("");
					$("#youtube-link").css("display", "block");
					$("#youtube-link").attr("src", videos[id]);
				}
				else if(content === "filename")
				{	
					$("#video").html("");
					videoHtml = $("#video").html();
					if(videoHtml == ""){				
						var videoSkin = $("<video controls width='100%' height='453'></video>");
						var source = $("<source id='video-source' src=''>");
						videoSkin.append(source);
					}
					$("#video").append(videoSkin);
					$("#youtube-link").css("display", "none");
					$("#youtube-link").attr("src","");					
					$("#text-card").css("display","none");
					$("#video").css("display", "block");
					$("#video-source").attr("src", "/images/"+videos[id]);
				}

				console.log(desc[id]);
				if(desc[id] != "")				
				{
					//$("#description").html(desc[id]);
					//$("#desc-text").css("display", "block");
				}
				else
				{
					console.log("hell");
					$("#description").html("");
					$("#desc-text").css("display", "none");
				}
			});
		</script>
</body>

</html>